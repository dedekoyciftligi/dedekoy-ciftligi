<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>√áiftlik Y√∂netimi</title>
<style>

body{
font-family:Arial;
background:#f4f6f9;
margin:0;
}

header{
background:linear-gradient(90deg,#6a11cb,#2575fc);
color:white;
padding:20px;
text-align:center;
font-size:22px;
font-weight:bold;
}

.container{
padding:20px;
}

.card{
background:white;
padding:15px;
margin-bottom:15px;
border-radius:12px;
box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

button{
padding:10px;
border:none;
border-radius:8px;
background:#6a11cb;
color:white;
cursor:pointer;
margin-top:10px;
}

input,select{
width:100%;
padding:8px;
margin-top:5px;
margin-bottom:10px;
border-radius:6px;
border:1px solid #ccc;
}

.grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:10px;
}

.stat{
background:linear-gradient(90deg,#2575fc,#6a11cb);
color:white;
padding:15px;
border-radius:12px;
text-align:center;
font-size:18px;
}

.animal{
background:white;
padding:10px;
border-radius:10px;
margin-bottom:10px;
box-shadow:0 3px 8px rgba(0,0,0,0.06);
}

</style>
</head>
<body>

<header>üêë √áiftlik Y√∂netimi</header>

<div class="container">

<div class="grid">
<div class="stat">Toplam<br><span id="toplam">0</span></div>
<div class="stat">Koyun<br><span id="koyun">0</span></div>
<div class="stat">Kuzu<br><span id="kuzu">0</span></div>
<div class="stat">Ko√ß<br><span id="koc">0</span></div>
<div class="stat">Dana<br><span id="dana">0</span></div>
<div class="stat">ƒ∞nek<br><span id="inek">0</span></div>
<div class="stat">D√ºve<br><span id="duve">0</span></div>
<div class="stat">Boƒüa<br><span id="boga">0</span></div>
</div>

<div class="card">
<h3>Hayvan Ekle</h3>

QR ID
<input id="qr">

K√ºpe No
<input id="kupe">

T√ºr
<select id="tur">
<option value="">Se√ßiniz</option>
<option>Kuzu</option>
<option>Koyun</option>
<option>Ko√ß</option>
<option>Dana</option>
<option>ƒ∞nek</option>
<option>D√ºve</option>
<option>Boƒüa</option>
</select>

ƒ∞lk Kilo
<input type="number" id="kilo">

<button onclick="hayvanEkle()">Kaydet</button>
</div>

<div class="card">
<h3>Hayvan Listesi</h3>
<div id="liste"></div>
</div>

</div>

<script>

const API = "https://script.google.com/macros/s/AKfycbyCrUTpLx_ICZPjSyuPz5cepk7Tt-kwi7eE5DU3GCA0XrjGCISGW-bIeZnfWiWyUjsn/exec";

async function hayvanEkle(){

const qr = document.getElementById("qr").value.trim();
const kupe = document.getElementById("kupe").value.trim();
const tur = document.getElementById("tur").value;
const kilo = document.getElementById("kilo").value;

const r = await fetch(API,{
method:"POST",
body:JSON.stringify({
tip:"hayvanEkle",
qr:qr,
kupe:kupe,
tur:tur,
kilo:kilo
})
});

const cevap = await r.json();

if(cevap.hata){
alert(cevap.hata);
return;
}

alert("Eklendi");
location.reload();
}

async function listele(){

const r = await fetch(API,{
method:"POST",
body:JSON.stringify({tip:"liste"})
});

const data = await r.json();

let html="";
let sayac={};

data.forEach(a=>{

sayac[a.Tur]=(sayac[a.Tur]||0)+1;

html+=`
<div class="animal">
<b>${a.KupeNo}</b> - ${a.Tur}<br>
ƒ∞lk: ${a.IlkKilo} kg | Son: ${a.SonKilo} kg<br>
<button onclick="kiloGuncelle('${a.KupeNo}')">Kilo G√ºncelle</button>
</div>
`;

});

document.getElementById("liste").innerHTML=html;

document.getElementById("toplam").innerText=data.length;
document.getElementById("koyun").innerText=sayac["Koyun"]||0;
document.getElementById("kuzu").innerText=sayac["Kuzu"]||0;
document.getElementById("koc").innerText=sayac["Ko√ß"]||0;
document.getElementById("dana").innerText=sayac["Dana"]||0;
document.getElementById("inek").innerText=sayac["ƒ∞nek"]||0;
document.getElementById("duve").innerText=sayac["D√ºve"]||0;
document.getElementById("boga").innerText=sayac["Boƒüa"]||0;

}

async function kiloGuncelle(kupe){

const yeni = prompt("Yeni kilo:");
if(!yeni) return;

await fetch(API,{
method:"POST",
body:JSON.stringify({
tip:"kiloGuncelle",
kupe:kupe,
kilo:yeni
})
});

location.reload();
}

listele();

</script>

</body>
</html>
